<!DOCTYPE html>
<html lang="pl">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport"
    content="viewport-fit=cover, width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <meta name="viewport" content="initial-scale=1.0, width=device-width" />
  <meta name="theme-color" content="#94bbe9">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <title>AllyBooksWeb</title>
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <div id="leaf-container"></div>

  <div class="background-color"></div>
  <div class="background">
    <div class="container">
      <img id="ava" src="img/ava.jpg" alt="Avatar"><br><br>
      <h1>Ally Books</h1>
      <div class="buttons grid">
        <a class="btn-1" href="https://t.me/HeartstopperTranslate" target="_blank">Telegram</a>
        <a class="btn-2" href="https://www.tiktok.com/@ally_books_comics?_t=8pgz6AAP4lM&_r=1" target="_blank">TikTok</a>
        <a class="btn-3" href="https://pin.it/WszvmJ1Yk" target="_blank">Pinterest</a>
        <a class="btn-4" href="https://ficbook.net/authors/01960fc7-b01c-70a8-bb42-298e2af331d2"
          target="_blank">Ficbook</a>
        <a class="btn-5" href="https://www.flibusta.is/a/328834" target="_blank">Flibusta</a>
      </div>

      <div id="animation">
        <button type="button" id="setting-btn">
          <svg width="16" height="16">
            <rect class="bar top" x="0" y="10%" rx="2" ry="2" height="2.5" width="90%" fill="currentColor" />
            <rect class="bar middle" x="0" y="43%" rx="2" ry="2" height="2.5" width="70%" fill="currentColor" />
            <rect class="bar bottom" x="0" y="77%" rx="2" ry="2" height="2.5" width="100%" fill="currentColor" />
          </svg>
        </button><br>

        <section id="setting-panel" class="tab-content">
          <button class="animation_btn" onclick="toggleAnimation(1)">падение</button>
          <button class="animation_btn" onclick="toggleAnimation(2)">ветер</button>
          <button class="animation_btn" id="play-btn" onclick="toggleAnimation(4)">
            <svg width="14" height="14" viewBox="0 0 24 24">
              <polygon class="icon" points="6,4 6,24 23,12.5" fill="none" stroke="currentColor" stroke-width="3" />
              <rect class="bar left" x="5" y="6" width="5" height="16" fill="currentColor" />
              <rect class="bar right" x="15" y="6" width="5" height="16" fill="currentColor" />
            </svg>
          </button>

        </section>
      </div>
    </div>
  </div>

  <div id="made_by">
    <span>made by <a href="https://t.me/vadosmik" target="_blank">@vadosmik</a></span>
  </div>

  <audio id="bg-music" autoplay loop muted preload="auto">
    <source src="ampient.m4a" type="audio/mp4">
    Twoja przeglądarka nie obsługuje elementu audio.
  </audio>



<script>
  // BEZ żadnych tokenów Telegrama w frontendzie — usuń te dane z kodu!
  document.addEventListener('DOMContentLoaded', () => {
    const audio = document.getElementById('bg-music');
    const playBtn = document.getElementById('play-btn'); // masz taki przycisk

    // Safety: spróbuj od razu play (muted pozwala na autoplay)
    audio.play().catch(()=>{ /* ignore */ });

    // Po pierwszej interakcji użytkownika odmutowujemy i zaczynamy grać
    const unlockAudio = () => {
      if (audio.muted) {
        audio.muted = false;
        audio.play().catch(()=>{ /* autoplay może nadal być zablokowany */ });
      }
      // usuwamy listener, bo już niepotrzebny
      window.removeEventListener('click', unlockAudio);
      window.removeEventListener('touchstart', unlockAudio);
    };
    window.addEventListener('click', unlockAudio, { once: true });
    window.addEventListener('touchstart', unlockAudio, { once: true });

    // Toggle przyciskiem #play-btn — włącz/wyłącz muzykę i zmień klasę przycisku
    if (playBtn) {
      playBtn.addEventListener('click', (e) => {
        e.preventDefault();
        if (audio.paused) {
          audio.play().catch(()=>{/* może wymagać interakcji */});
          audio.muted = false;
          playBtn.classList.add('active');
        } else {
          audio.pause();
          playBtn.classList.remove('active');
        }
      });
    }
  });
</script>



  <script src="tabView.js"></script>
  <script src="leaves.js"></script>
</body>

</html>